class VinControls{constructor(e,t={}){this.video=e?"string"==typeof e?document.querySelector(e):e:null,this.controls={playPause:!0,volume:!0,duration:!0,fullscreen:!0,rotation:!0,pip:!0,download:!0,autoPlay:!1,...t},null!==this.video?this.init():console.warn("No video was passed in.")}init(){this.createControls(),this.initEvents(),this.checkSupport(),this.removeControls()}createControls(){const e=document.createElement("div");e.className="video-container",e.classList.add(/Mobile/.test(navigator.userAgent)?"M":"D"),e.dataset.cs=!1,e.tabIndex=0,e.dataset.playing=!1,e.dataset.volume="high",e.dataset.fullscreen=!1,e.dataset.pip=!1,this.video.parentNode.insertBefore(e,this.video),e.appendChild(this.video);const t=document.createElement("div");t.className="popup-wrapper",e.appendChild(t);const n=document.createElement("div");n.className="fastFor",n.innerHTML='\n        <svg class="fastfor-icon" width="50" height="50" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.952 12-4.9519 2.859v-5.7179l2.4759 1.4295z"/><path d="m14.456 12-4.9519 2.859v-5.7179l2.4759 1.4295z"/><path d="m6.9588 12.245-4.9519 2.859v-5.7179l2.4759 1.4295z"/></svg>\n        <span>2X</span>\n        ',t.appendChild(n);const o=document.createElement("div");o.className="for10Wrap",o.innerHTML='\n        <svg class="for10-icon" width="30%" height="30%" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.952 12-4.9519 2.859v-5.7179l2.4759 1.4295z"/><path d="m14.456 12-4.9519 2.859v-5.7179l2.4759 1.4295z"/><path d="m6.9588 12.245-4.9519 2.859v-5.7179l2.4759 1.4295z"/></svg>\n        <span></span>\n        ',t.appendChild(o);const i=document.createElement("div");i.className="back10Wrap",i.innerHTML='\n        <svg class="back10-icon" width="30%" height="30%" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m2.0273 12 4.9519 2.859v-5.7179l-2.4759 1.4295z"/><path d="m9.524 12 4.9519 2.859v-5.7179l-2.4759 1.4295z"/><path d="m17.021 12.245 4.9519 2.859v-5.7179l-2.4759 1.4295z"/></svg>\n        <span></span>\n        ',t.appendChild(i);const r=document.createElement("div");r.className="control-wrapper",e.appendChild(r);const s=document.createElement("div");s.className="timeline",r.appendChild(s);const a=document.createElement("p");a.className="scTime",a.textContent="0:00",s.appendChild(a);const l=document.createElement("div");l.className="bar-wrapper",s.appendChild(l);const d=document.createElement("div");d.className="buffer-wrapper",l.appendChild(d);const c=document.createElement("div");c.className="progress",c.dataset.transition=!0,l.appendChild(c);const u=document.createElement("div");u.className="button-wrapper",r.appendChild(u);const m=document.createElement("div");m.className="play-pause-btn",m.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="play-icon"> <polygon points="5 3 19 12 5 21 5 3"></polygon> </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="pause-icon"> <rect x="6" y="4" width="4" height="16"></rect> <rect x="14" y="4" width="4" height="16"></rect> </svg>\n        ',u.appendChild(m);const p=document.createElement("p");p.className="pPN",p.textContent="Play (k)",s.appendChild(p);const v=m.cloneNode(!0);v.className="play-pause",t.appendChild(v);const h=document.createElement("div");h.className="volume-wrapper",u.appendChild(h);const w=document.createElement("div");w.className="volume-btn",w.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="volume-2-icon"> <polygon fill="currentColor" points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon> <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path> </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="volume-1-icon"> <polygon fill="currentColor" points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon> <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path> </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="volume-x-icon"> <polygon fill="currentColor" points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon> <line x1="23" y1="9" x2="17" y2="15"></line> <line x1="17" y1="9" x2="23" y2="15"></line> </svg>\n        ',h.appendChild(w),h.style.setProperty("--w",w.clientWidth+"px");const y=w.cloneNode(!0);y.className="volumeIcons",t.appendChild(y);const g=document.createElement("p");g.className="vBtnN",g.textContent="Mute (m)",s.appendChild(g);const f=document.createElement("input");f.className="volume-bar",f.type="range",f.value=1,f.max=1,f.min=0,f.step="any",f.tabIndex=-1,h.appendChild(f),h.style.setProperty("--wh",h.scrollWidth+"px");const E=document.createElement("p");E.className="vBN",E.textContent="100%",s.appendChild(E);const x=document.createElement("p");if(x.className="duration-wrapper",x.innerHTML="<span>0:00</span> / <span>0:00</span>",u.appendChild(x),!this.controls.duration){const e=document.createElement("div");e.classList="space",u.appendChild(e)}const k=document.createElement("div");k.className="download-btn",k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="download-icon"> <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path> <polyline points="7 10 12 15 17 10"></polyline> <line x1="12" y1="15" x2="12" y2="3"></line> </svg>',u.appendChild(k);const C=document.createElement("p");C.className="dN",C.textContent="Download (d)",s.appendChild(C);const N=document.createElement("div");N.className="pip-btn",N.innerHTML='\n        <svg class="pip-icon-1" width="100%" height="100%" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect x="1.7393" y="3.5308" width="20.521" height="16.938" ry="1.6937" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2"/><rect x="11.266" y="11.674" width="8.6514" height="6.4725" ry="1.0954" fill="currentColor"/></svg>\n        <svg class="pip-icon-2" version="1.1" width="100%" height="100%" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="m11.433 3.5308h9.134c0.93832 0 1.6937 0.75539 1.6937 1.6937v13.551c0 0.93832-0.75539 1.6937-1.6937 1.6937h-17.134c-0.93832 0-1.6937-0.75539-1.6937-1.6937v-5.551m0.026102-3.8208 0.026102-5.8208 5.8208-0.026103" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/> <path d="m1.7915 3.583 8.4245 8.417" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/> </svg>\n        ',u.appendChild(N);const L=document.createElement("p");L.className="pN",L.textContent="PiP (p)",s.appendChild(L);const b=document.createElement("div");b.className="rotate-btn",b.style.display="none",b.innerHTML='<svg class="for10-icon" width="100%" height="100%" fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m8.0869 16.731a0.43747 0.43747 0 0 1-0.43747 0.43747 0.43747 0.43747 0 0 1-0.43747-0.43747 0.43747 0.43747 0 0 1 0.43747-0.43747 0.43747 0.43747 0 0 1 0.43747 0.43747zm8.0824-4.9201h4.4341c0.87758 0 1.5841 0.7065 1.5841 1.5841v6.6719c0 0.87758-0.7065 1.5841-1.5841 1.5841h-4.4341m-12.952-19.302h8.8641c0.77824 0 1.4048 0.62652 1.4048 1.4048v16.492c0 0.77824-0.62652 1.4048-1.4048 1.4048h-8.8641c-0.77824 0-1.4048-0.62652-1.4048-1.4048v-16.492c0-0.77824 0.62652-1.4048 1.4048-1.4048z"/></svg>',u.appendChild(b);const T=document.createElement("div");T.className="fullscreen-btn",T.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="maximize-icon"> <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path> </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="minimize-icon"> <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path> </svg>\n        ',u.appendChild(T);const S=T.cloneNode(!0);S.className="fullscreen",t.appendChild(S);const F=document.createElement("p");F.className="fN",F.textContent="Fullscreen (f)",F.style.right=parseFloat(window.getComputedStyle(s).paddingRight)+"px",s.appendChild(F)}cachedControls(){const e=this.video,t=e.parentNode;return{video:e,container:t,playPause:t.querySelector(".play-pause-btn"),volume:t.querySelector(".volume-wrapper"),duration:t.querySelector(".duration-wrapper"),fullscreen:t.querySelector(".fullscreen-btn"),rotation:t.querySelector(".rotate-btn"),pip:t.querySelector(".pip-btn"),progress:t.querySelector(".progress"),timeline:t.querySelector(".timeline"),buffer:t.querySelector(".buffer-wrapper"),popupWrapper:t.querySelector(".popup-wrapper"),download:t.querySelector(".download-btn"),popupPlayPause:t.querySelector(".play-pause"),scTime:t.querySelector(".scTime"),for10Wrap:t.querySelector(".for10Wrap"),for10Icon:t.querySelector(".for10-icon"),back10Wrap:t.querySelector(".back10Wrap"),back10Icon:t.querySelector(".back10-icon"),fastFor:t.querySelector(".fastFor"),volumeIcons:t.querySelector(".volumeIcons"),controlWrapper:t.querySelector(".control-wrapper"),pPN:t.querySelector(".pPN"),vBtnN:t.querySelector(".vBtnN"),vBN:t.querySelector(".vBN"),dN:t.querySelector(".dN"),pN:t.querySelector(".pN"),fN:t.querySelector(".fN")}}initEvents(){const e=this.cachedControls();e.video.load(),this.controls.autoPlay&&e.video.play().catch(()=>{e.video.muted=!0,e.video.play()});const t=()=>{e.video.paused?e.video.play():e.video.pause()},n=()=>{0===e.video.volume?(e.video.volume=.1,e.volumeIcons.children[1].style.animationName="",setTimeout(()=>{e.volumeIcons.children[1].style.animationName="popup"})):e.video.muted?(e.video.muted=!1,e.video.volume>.5?(e.volumeIcons.children[0].style.animationName="",setTimeout(()=>{e.volumeIcons.children[0].style.animationName="popup"})):(e.volumeIcons.children[1].style.animationName="",setTimeout(()=>{e.volumeIcons.children[1].style.animationName="popup"}))):(e.video.muted=!0,e.volumeIcons.children[2].style.animationName="",setTimeout(()=>{e.volumeIcons.children[2].style.animationName="popup"}))},o=()=>{null!==document.pictureInPictureElement?document.pictureInPictureElement!==e.video?document.exitPictureInPicture().then(e.video.requestPictureInPicture()):document.exitPictureInPicture():e.video.requestPictureInPicture()},i=async()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?(e.fN.textContent="Fullscreen (f)",document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullscreen():document.msExitFullscreen&&await document.msExitFullscreen()):(e.fN.textContent="Exit Fullscreen (f)",e.container.requestFullscreen?await e.container.requestFullscreen():e.container.webkitRequestFullscreen?await e.container.webkitRequestFullscreen():e.container.mozRequestFullScreen?await e.container.mozRequestFullscreen():e.container.msRequestFullscreen&&await e.container.msRequestFullscreen(),await screen.orientation.lock(e.video.videoWidth>e.video.videoHeight?"landscape":"portrait").catch(()=>{e.rotation&&e.rotation.remove()}))},r=()=>{const t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=e.popupWrapper.querySelector(".maximize-icon"),o=e.popupWrapper.querySelector(".minimize-icon");let i;clearTimeout(i),t?(e.container.dataset.fullscreen=!0,e.video.style.width="100vw",e.video.style.height="100vh",e.container.style.borderRadius="0",e.rotation.style.display="block",n.style.animationName="",n.style.animationName="popup",i=setTimeout(()=>{n.style.animationName=""},500)):(e.container.dataset.fullscreen=!1,e.video.style.width="",e.video.style.height="",e.container.style.borderRadius="",e.rotation.style.display="none",o.style.animationName="",o.style.animationName="popup",i=setTimeout(()=>{o.style.animationName=""},500))},s=async()=>{if((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullscreen():document.msExitFullscreen&&await document.msExitFullscreen()),e.container.parentNode.querySelector(".download-notif"))return;const t=document.createElement("div");t.className="download-notif",t.innerHTML='\n            <p>You\'re about to download this video.</p>\n            <p>Enter a name for the file:</p>\n            <input type="text" placeholder="VIDEO" autocomplete="off">\n            <div class="btns">\n                <div>\n                    <p>Cancel</p>\n                </div>\n                <div>\n                    <p>Download</p>\n                </div>\n            </div>\n            ',t.tabIndex=0,t.style.cssText="\n            -webkit-tap-highlight-color: transparent;\n            position: fixed;\n            outline: none;\n            z-index: 1000000;\n            color: black;\n            max-width: 80%;\n            top: 50%;\n            left: 50%;\n            background: white;\n            transform: translate(-50%, -50%) scale(0);\n            padding: 10px;\n            border-radius: 10px;\n            font-size: 1.2rem;\n            user-select: none;\n            opacity: 0;\n            transition: opacity .5s .25s, transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);\n            ",e.container.parentNode.insertBefore(t,e.container),t.focus();const n=document.createElement("div");n.style.cssText="\n                position: fixed;\n                z-index: 1000000;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: #00000080;\n                backdrop-filter: blur(5px);\n                opacity: 0;\n                transition: opacity .5s;\n            ",t.parentNode.insertBefore(n,t),requestAnimationFrame(()=>{t.style.transform="translate(-50%, -50%) scale(1)",t.style.opacity="1",n.style.opacity="1"}),t.querySelector("input").style.cssText="\n            width: 100%;\n            outline: none;\n            border: 1px solid #00000040;\n            box-sizing: border-box;\n            padding: 10px 5px;\n            ",t.querySelector(".btns").style.cssText="\n            display: flex;\n            margin-top: 10px;\n            align-items: center;\n            gap: 5px;\n            ",Array.from(t.querySelector(".btns").children).forEach(e=>{e.style.cssText="\n                display: grid;\n                place-items: center;\n                background: black;\n                color: white;\n                padding-block: 10px;\n                cursor: pointer;\n                border-radius: 5px;\n                width: 150px;\n                ",e.children[0].style.margin="0"});const o=()=>{e.container.focus(),l(),t.style.transition="opacity .5s, transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);",t.style.transform="translate(-50%, -50%) scale(0)",t.style.opacity="0",t.style.pointerEvents="none",n.style.opacity="0",t.addEventListener("transitionend",()=>{t.remove(),n.remove()})},i=()=>{let n="VIDEO";n=""===t.querySelector("input").value.trim()?n:t.querySelector("input").value;let i=null;i=e.video.src?e.video.src:e.video.querySelector("source").src;const r=document.createElement("a");r.href=i,r.download=n,r.click(),o()};t.addEventListener("keydown",e=>{"Enter"===e.key?i():"Escape"===e.key?o():/^[\x20-\x7E]$/.test(e.key.toLowerCase())&&t.querySelector("input").focus()}),t.querySelector(".btns").children[0].addEventListener("click",o),t.querySelector(".btns").children[1].addEventListener("click",i)};let a;const l=()=>{e.container.dataset.cs=!0,clearTimeout(a),a=setTimeout(()=>{e.container.dataset.cs=!1},2500)};let d=10,c=10;const u=()=>{e.for10Wrap.classList.remove("show"),e.for10Wrap.children[1].textContent=d+" sec",d+=10,setTimeout(()=>{e.for10Wrap.classList.add("show")})},m=()=>{e.back10Wrap.classList.remove("show"),e.back10Wrap.children[1].textContent=c,c+=10,setTimeout(()=>{e.back10Wrap.classList.add("show")})};e.fullscreen.addEventListener("mouseenter",()=>{e.fN.classList.add("show")}),e.fullscreen.addEventListener("mouseleave",()=>{e.fN.classList.remove("show")}),e.pip.addEventListener("mouseenter",()=>{e.pN.classList.add("show")}),e.pip.addEventListener("mouseleave",()=>{e.pN.classList.remove("show")}),e.volume.children[0].addEventListener("mouseenter",()=>{e.vBtnN.classList.add("show"),this.removeControls()}),e.volume.children[0].addEventListener("mouseleave",()=>{e.vBtnN.classList.remove("show")}),e.volume.children[1].addEventListener("mouseenter",()=>{e.vBN.classList.add("show"),this.removeControls()}),e.volume.children[1].addEventListener("mouseleave",()=>{e.vBN.classList.remove("show")}),e.playPause.addEventListener("mouseenter",()=>{e.pPN.classList.add("show"),this.removeControls()}),e.playPause.addEventListener("mouseleave",()=>{e.pPN.classList.remove("show")}),e.download.addEventListener("mouseenter",()=>{e.dN.classList.add("show"),this.removeControls()}),e.download.addEventListener("mouseleave",()=>{e.dN.classList.remove("show")}),e.for10Icon.addEventListener("animationend",()=>{e.for10Wrap.classList.remove("show"),d=10}),e.back10Icon.addEventListener("animationend",()=>{e.back10Wrap.classList.remove("show"),c=10}),e.container.addEventListener("mousemove",l),e.container.addEventListener("touchmove",l),e.playPause.addEventListener("click",t);const p=e.popupPlayPause.querySelector(".play-icon"),v=e.popupPlayPause.querySelector(".pause-icon");e.video.addEventListener("play",()=>{e.container.dataset.playing=!0,e.pPN.textContent="Pause (k)",p.style.animationName="",setTimeout(()=>{p.style.animationName="popup"},50)}),e.video.addEventListener("pause",()=>{e.container.dataset.playing=!1,e.pPN.textContent="Play (k)",v.style.animationName="",setTimeout(()=>{v.style.animationName="popup"},50)}),p.addEventListener("animationend",()=>{p.style.animationName=""}),v.addEventListener("animationend",()=>{v.style.animationName=""}),e.volume.children[0].addEventListener("click",n),e.volume.children[1].addEventListener("input",()=>{e.video.volume=e.volume.children[1].value,e.video.muted=0===e.volume.children[1].value,e.vBN.textContent=Math.floor(100*e.volume.children[1].value)+"%",e.volume.children[1].style.setProperty("--c",100*e.video.volume+"%")}),e.video.addEventListener("volumechange",()=>{e.volume.children[1].value=e.video.volume,e.video.muted||0===e.video.volume?(e.volume.children[1].value=0,e.container.dataset.volume="muted",e.vBtnN.textContent="Unmute (m)"):e.video.volume>.5?(e.container.dataset.volume="high",e.vBtnN.textContent="Mute (m)"):(e.container.dataset.volume="low",e.vBtnN.textContent="Mute (m)"),e.volume.children[1].style.setProperty("--c",100*e.volume.children[1].value+"%"),e.vBN.textContent=Math.floor(100*e.volume.children[1].value)+"%",this.removeControls()}),e.volumeIcons.children[2].addEventListener("animationend",()=>{e.volumeIcons.children[2].style.animationName=""}),e.volumeIcons.children[1].addEventListener("animationend",()=>{e.volumeIcons.children[1].style.animationName=""}),e.volumeIcons.children[0].addEventListener("animationend",()=>{e.volumeIcons.children[0].style.animationName=""}),e.video.addEventListener("loadedmetadata",()=>{e.duration.children[1].textContent=this.timeFormat(e.video.duration)}),e.video.addEventListener("timeupdate",()=>{e.duration.children[0].textContent=this.timeFormat(e.video.currentTime),e.progress.style.width=e.video.currentTime/e.video.duration*100+"%",x()}),e.fullscreen.addEventListener("click",i),e.container.addEventListener("fullscreenchange",r),e.container.addEventListener("webkitfullscreenchange",r),e.container.addEventListener("mozfullscreenchange",r),e.container.addEventListener("MSFullscreenChange",r),e.rotation.addEventListener("click",()=>{screen.orientation.lock(screen.orientation.type.includes("landscape")?"portrait":"landscape")}),e.pip.addEventListener("click",o),e.video.addEventListener("enterpictureinpicture",()=>{e.container.dataset.pip=!0}),e.video.addEventListener("leavepictureinpicture",()=>{e.container.dataset.pip=!1}),e.download.addEventListener("click",s);let h=!1,w=!1,y=!1,g=!1;const f=t=>{if(!e.video.duration)return;const n=e.progress.parentNode.getBoundingClientRect(),o=Math.max(0,Math.min(t.clientX-n.left,n.width));e.progress.style.width=o/n.width*100+"%",e.duration.children[0].textContent=this.timeFormat(o/n.width*e.video.duration),e.video.currentTime=o/n.width*e.video.duration},E=t=>{if(!e.video.duration)return;e.scTime.classList.add("show");const n=e.timeline.getBoundingClientRect(),o=e.progress.parentNode.getBoundingClientRect();e.scTime.textContent=this.timeFormat(Math.max(0,Math.min(o.width,t.clientX-o.left))/o.width*e.video.duration);const i=t.clientX-n.left-e.scTime.clientWidth/2,r=Math.max(o.left-n.left,Math.min(i,o.left-n.left+(o.width-e.scTime.clientWidth)));e.scTime.style.left=r+"px"};e.timeline.addEventListener("pointerdown",t=>{h=!0,e.progress.dataset.transition=!0,f(t),e.video.paused||(w=!0),e.video.pause()}),e.timeline.addEventListener("mousemove",()=>{y=!0}),e.timeline.addEventListener("touchmove",()=>{y=!0}),e.timeline.addEventListener("touchend",()=>{y=!1}),e.timeline.addEventListener("mouseenter",()=>{g=!0}),e.timeline.addEventListener("mouseleave",()=>{y=!1,g=!1,e.scTime.classList.remove("show")}),document.addEventListener("mouseup",()=>{h&&(e.progress.dataset.transition=!0),h=!1,g||(y=!1,e.scTime.classList.remove("show")),w&&(e.video.play(),w=!1)}),document.addEventListener("touchend",()=>{h&&(e.progress.dataset.transition=!0),h=!1,y=!1,e.scTime.classList.remove("show"),w&&(e.video.play(),w=!1)}),document.addEventListener("mousemove",t=>{h&&(e.progress.dataset.transition=!1,f(t),E(t),l()),y&&E(t)}),document.addEventListener("touchmove",t=>{h&&(t.preventDefault(),e.progress.dataset.transition=!1,f(t.touches[0]),E(t.touches[0])),y&&(t.preventDefault(),E(t.touches[0]))},{passive:!1});const x=()=>{const t=e.video.buffered,n=e.video.duration;if(n&&0!==t.length){e.buffer.innerHTML="";for(let o=0;o<t.length;o++){const i=t.start(o),r=t.end(o),s=document.createElement("div");e.buffer.appendChild(s),s.style.left=i/n*100+"%",s.style.width=(r-i)/n*100+"%"}}};e.video.addEventListener("progress",x),e.video.addEventListener("canplay",()=>{e.popupWrapper.classList.remove("loading")}),e.video.addEventListener("waiting",()=>{e.popupWrapper.classList.add("loading")}),e.video.addEventListener("loadstart",()=>{e.popupWrapper.classList.add("loading")}),e.video.addEventListener("seeking",()=>{e.popupWrapper.classList.add("loading")}),e.video.addEventListener("click",n=>{if(0!==n.button)return;const o=e.video.getBoundingClientRect(),i=n.clientX-o.left,r=o.width/3;i>=r&&i<=2*r&&t()});let k,C,N=0,L=!1;e.video.addEventListener("touchstart",()=>{L=!0,clearTimeout(C)}),e.video.addEventListener("touchend",t=>{if(!e.video.duration)return;if(!t.changedTouches[0])return;const n=e.video.getBoundingClientRect(),o=t.changedTouches[0].clientX-n.left,i=n.width/3;N+=1,clearTimeout(k),k=setTimeout(()=>{N=0},250),o<i&&2===N?(N=0,m(),e.video.currentTime=Math.max(0,e.video.currentTime-10)):o>2*i&&2===N&&(N=0,u(),e.video.currentTime=Math.min(e.video.duration,e.video.currentTime+10)),e.progress.style.width=e.video.currentTime/e.video.duration*100+"%",e.duration.children[0].textContent=this.timeFormat(e.video.currentTime),C=setTimeout(()=>{L=!1},100)});let b,T=0;e.video.addEventListener("mouseup",t=>{if(L)return;const n=e.video.getBoundingClientRect(),o=t.clientX-n.left,r=n.width/3;o>=r&&o<=2*r||(T+=1,clearTimeout(b),b=setTimeout(()=>{T=0},250),2===T&&(T=0,i()))}),e.video.addEventListener("contextmenu",e=>{e.preventDefault()});let S=!1;e.container.addEventListener("keydown",t=>{if((t.repeat&&" "===t.key||t.repeat&&"k"===t.key.toLowerCase())&&(e.video.paused&&e.video.play(),e.fastFor.classList.add("show"),S=!0,e.video.playbackRate=2)," "===t.key.toLowerCase())t.preventDefault()}),e.container.addEventListener("keyup",r=>{const a=r.key.toLowerCase();if(S)return e.video.playbackRate=1,S=!1,void e.fastFor.classList.remove("show");switch(a){case" ":case"k":t();break;case"m":n();break;case"p":o();break;case"f":i();break;case"d":s();break;case"arrowleft":l(),m(),e.video.currentTime=Math.max(0,e.video.currentTime-10),e.progress.style.width=e.video.currentTime/e.video.duration*100+"%",e.duration.children[0].textContent=this.timeFormat(e.video.currentTime);break;case"arrowright":l(),u(),e.video.currentTime=Math.min(e.video.currentTime+10,e.video.duration),e.progress.style.width=e.video.currentTime/e.video.duration*100+"%",e.duration.children[0].textContent=this.timeFormat(e.video.currentTime)}}),Array.from(e.controlWrapper.children).forEach(e=>{e.addEventListener("click",()=>{l()})})}removeControls(){for(let e in this.controls)this.controls[e]||this.cachedControls()[e]&&this.cachedControls()[e].remove();const e=this.cachedControls(),t=e.timeline.getBoundingClientRect();if(e.volume){const n=e.volume.children[0].getBoundingClientRect();e.vBtnN.style.left=Math.max(n.left-t.left-(e.vBtnN.clientWidth/2-n.width/2),parseFloat(window.getComputedStyle(e.timeline).paddingLeft))+"px";const o=e.volume.children[1].getBoundingClientRect();e.vBN.style.left=o.left-t.left+o.width/2-e.vBN.clientWidth/2+"px"}if(e.download){const n=e.download.getBoundingClientRect();e.dN.style.left=Math.min(n.left-t.left-(e.dN.clientWidth-n.width/2)/2,t.width-(parseFloat(window.getComputedStyle(e.timeline).paddingRight)+e.dN.clientWidth))+"px"}if(e.pip){const n=e.pip.getBoundingClientRect();e.pN.style.left=Math.min(n.left-t.left+n.width/2-e.pN.clientWidth/2,t.width-(parseFloat(window.getComputedStyle(e.timeline).paddingRight)+e.pN.clientWidth))+"px"}}checkSupport(){const e=this.cachedControls();document.fullscreenEnabled&&!(!1 in document)||e.fullscreen&&e.fullscreen.remove(),document.pictureInPictureEnabled&&!(!1 in document)||e.pip&&e.pip.remove()}timeFormat(e){const t=Math.floor(e%60).toString().padStart(2,"0"),n=Math.floor(e/60%60),o=n.toString().padStart(2,"0"),i=Math.floor(e/3600);return 0===i?`${n}:${t}`:`${i}:${o}:${t}`}}